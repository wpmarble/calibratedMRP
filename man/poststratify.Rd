% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/logit-shift.R
\name{poststratify}
\alias{poststratify}
\title{Poststratify estimates}
\usage{
poststratify(ps_table, vars, weight, by, n_out = "n", na.rm = TRUE)
}
\arguments{
\item{ps_table}{A data frame where each row represents a poststratification cell.}

\item{vars}{One or more outcome variables to poststratify.
Accepts tidyselect syntax (e.g., \code{var}, \code{c(var1, var2)}, \code{starts_with("prefix")}).}

\item{weight}{A variable giving the population weights in \code{ps_table}.}

\item{by}{One or more grouping variables. Accepts tidyselect syntax.}

\item{n_out}{Name of the output column that stores the total weight per group.}

\item{na.rm}{Should missing values in \code{vars} be ignored? Defaults to \code{TRUE}.}
}
\value{
A data frame with one row per group in \code{by} and columns for each variable in
\code{vars} containing the postratified estimates.
}
\description{
Compute weighted means for one or more outcome variables using
poststratification weights, grouped by specified variables (typically geographies
or demographic groups). Returns a tidy data frame with one row per group
and one column per poststratified variable, plus the total population weight
for each group.
}
\examples{
# Example poststrat table
ps <- data.frame(
  county = rep(c("A", "B"), each = 3),
  demo_group = rep(c(1, 2), 3),
  cell_est = c(0.4, 0.5, 0.6, 0.3, 0.35, 0.4),
  N = c(100, 200, 300, 150, 250, 100)
)

# Poststratify cell_est to counties
poststratify(
  ps_table = ps,
  vars = "cell_est",
  weight = N,
  by = county
)
}
